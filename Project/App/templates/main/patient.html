<!DOCTYPE html>
<html lang="en">
{% load static %}
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patient Information</title>
    <link rel="icon" type="image/x-icon" href="{% static 'images/favicon.ico' %}">
    <link rel="stylesheet" href="{% static 'css/patient.css' %}">
    <!--style-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.0/font/bootstrap-icons.css">
    <!--table-->
    <link rel="stylesheet" href="https://cdn.datatables.net/2.2.2/css/dataTables.bootstrap5.css">
    <link rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.19.1/dist/bootstrap-table.min.css">
    <!--phone number-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/css/intlTelInput.min.css">

</head>
<body>
    <div class="patient-header">
        <h1 class="d-flex align-items-center gap-2">
            Patient Information
            <button id="print-header" class="btn btn-link p-0 border-0 text-info" data-bs-toggle="tooltip" title="Print patient information"> <i class="bi bi-printer-fill fs-4"></i></button>
        </h1>
        <!-- Tab Navigation -->
        <ul class="nav nav-tabs" id="myTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="patient-tab" data-bs-toggle="tab" data-bs-target="#patient" type="button" role="tab" aria-controls="patient" aria-selected="true">
                    Patient Details
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="vitals-tab" data-bs-toggle="tab" data-bs-target="#vitals" type="button" role="tab" aria-controls="vitals" aria-selected="false">
                    Vital Sign Monitoring
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="med-tab" data-bs-toggle="tab" data-bs-target="#med" type="button" role="tab" aria-controls="med" aria-selected="false">
                    Medication Administration
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="note-tab" data-bs-toggle="tab" data-bs-target="#note" type="button" role="tab" aria-controls="note" aria-selected="false">
                    Nurse's Notes
                </button>
            </li>
        </ul>

        <!-- Tab Content -->
        <div class="tab-content-container">
            <div class="tab-content" id="patient_chart">
                <!--tab1-->
                <div class="tab-pane fade show active" id="patient" role="tabpanel" aria-labelledby="patient-tab">
                    <!-- QR Code Placeholder -->
                    <div class="text-center mb-4">
                        <div class="qr-placeholder bg-light p-4 mb-3 mx-auto" style="max-width: 300px;">
                            <img id="patient-qr-code" src="" alt="Patient QR Code" class="img-fluid">
                            <p class="text-muted mt-2">Patient QR Code</p>
                        </div>
                        <button id="print-qr-btn" class="btn btn-outline-primary">
                            <i class="bi bi-printer-fill me-2"></i>Print QR Code
                        </button>
                    </div>

                    {% block content %}
                    <div id="patient-info">
                        <div class="patient-field">
                            <strong>ID:</strong>
                            <span id="data-patient-id-view"></span>
                            <input type="text" id="data-patient-id-edit" class="form-control d-none" readonly>
                        </div>
                        <div class="patient-field">
                            <strong>Full Name:</strong>
                            <span id="data-patient-name-view"></span>
                            <input type="text" id="data-patient-name-edit" class="form-control d-none">
                        </div>
                        <div class="patient-field">
                            <strong>Sex:</strong>
                            <span id="data-patient-sex-view"></span>
                            <select class="form-select d-none" id="data-patient-sex-edit" required>
                                <option value="" selected disabled>Select Sex</option>
                                <option value="Female">Female</option>
                                <option value="Male">Male</option>
                            </select>
                        </div>
                        <div class="patient-field">
                            <strong>Birthday:</strong>
                            <span id="data-patient-bday-view"></span>
                            <input type="date" class="form-control d-none" id="data-patient-bday-edit">
                        </div>
                        <div class="patient-field">
                            <strong>Weight (kg):</strong>
                            <span id="data-patient-weight-view"></span>
                            <input type="number" step="0.1" id="data-patient-weight-edit" class="form-control d-none">
                        </div>
                        <div class="patient-field">
                            <strong>Height (cm):</strong>
                            <span id="data-patient-height-view"></span>
                            <input type="number" step="0.1" id="data-patient-height-edit" class="form-control d-none">
                        </div>
                        <div class="patient-field">
                            <strong>Phone Number:</strong>
                            <span id="data-patient-phone-view"></span>
                            <input class="form-control d-none" id="data-patient-phone-edit" type="tel" pattern="[0-9]*" inputmode="numeric" required>
                        </div>
                        <div class="patient-field">
                            <strong>Bed/ Room Number:</strong>
                            <span id="data-patient-number-view"></span>
                            <input type="text" id="data-patient-number-edit" class="form-control d-none">
                        </div>
                        <div class="patient-field">
                            <strong>Ward:</strong>
                            <span id="data-patient-ward-view"></span>
                            <select class="form-select d-none" id="data-patient-ward-edit" required>
                                <option value="" selected disabled>Select Ward</option>
                                <option value="General Ward">General Ward</option>
                                <option value="Pediatrics">Pediatrics</option>
                                <option value="ICU">Intensive Care Unit</option>
                                <option value="Maternity">Maternity Ward</option>
                                <option value="None">None</option>
                            </select>
                        </div>
                        <div class="patient-field">
                            <strong>Status:</strong>
                            <span id="data-patient-status-view"></span>
                            <select class="form-select d-none" id="data-patient-status-edit" required>
                                <option value="" selected disabled>Select Status</option>
                                <option value="Inpatient">Inpatient</option>
                                <option value="Outpatient">Outpatient</option>
                                <option value="Discharge">Discharge</option>
                            </select>
                        </div>
                        <div class="patient-field">
                            <strong>Attending Physician:</strong>
                            <span id="data-physician-name-view"></span>
                            <input type="text" id="data-patient-physician-edit" class="form-control d-none">
                        </div>
                        <div class="patient-field reason-field d-none">
                            <strong>Reason for modifying details: <span class="text-danger">*</span></strong>
                            <span id="data-patient-reason-view"></span>
                            <textarea class="form-control d-none" id="data-patient-reason-edit" maxlength="100" rows="2" required></textarea>
                            <div class="invalid-feedback">Please provide a reason for the modification.</div>
                        </div>

                        <div class="patient-field password-field d-none">
                            <strong>Shift password: <span class="text-danger">*</span></strong>
                            <span id="data-patient-password-view"></span>
                            <input type="password" autocomplete="off" class="form-control" id="data-patient-password-edit" required placeholder="Enter shift password to confirm update" >
                        </div>

                        <button id="edit-patient-btn" class="btn btn-primary mt-3">Update Details</button>
                        <button id="save-patient-btn" class="btn btn-success mt-3 d-none">Save</button>
                        <button id="cancel-patient-btn" class="btn btn-secondary mt-3 d-none">Cancel</button>
                    </div>
                    {% endblock %}

                </div>
 
                <!-- tab2 --> 
                <div class="tab-pane fade" id="vitals" role="tabpanel" aria-labelledby="vitals-tab">
                    <div class="vitals-container">
                        <div class="section">
                            <div class="info-grid">
                                <div class="info-item d-flex justify-content-between align-items-center">
                                     <!-- Patient Information Section -->
                                    <div>
                                        <strong>Patient Name:</strong>
                                        <span id="data-patient-name-view1">{{ patient_name }}</span>
                                        <input type="text" id="data-patient-name-edit1" value="{{ patient_name }}" class="form-control d-none">
                                    </div>
                                    <!-- Edit/Save/Cancel Buttons -->
                                    <div class="action-buttons">
                                        <button id="edit-vs-details-btn" class="btn btn-primary">Edit</button>
                                        <button id="save-vs-details-btn" class="btn btn-success d-none">Save</button>
                                        <button id="cancel-vs-details-btn" class="btn btn-secondary d-none">Cancel</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="section">
                            <h4>Allergies</h4>
                            <div class="info-item">
                                <span id="data-patient-allergies-view"></span>
                                <textarea id="data-patient-allergies-edit" class="form-control d-none"></textarea>
                            </div>
                        </div>
                        <div class="section">
                            <h4>Family History</h4>
                            <div class="info-item">
                                <span id="data-patient-family-history-view"></span>
                                <textarea id="data-patient-family-history-edit" class="form-control d-none"></textarea>
                            </div>
                        </div>
                        <div class="section">
                            <h4>Physical Exam</h4>
                            <div class="info-item">
                                <span id="data-patient-physical-exam-view"></span>
                                <textarea id="data-patient-physical-exam-edit" class="form-control d-none"></textarea>
                            </div>
                        </div>
                        <div class="section">
                            <h4>Diagnosis</h4>
                            <div class="info-item">
                                <span id="data-patient-diagnosis-view"></span>
                                <textarea id="data-patient-diagnosis-edit" class="form-control d-none"></textarea>
                            </div>
                        </div>
                        <div class="section reason-field d-none">
                            <strong>Reason for modifying details: <span class="text-danger">*</span></strong>
                            <textarea class="form-control d-none" id="data-patient-reason-edit" maxlength="100" rows="2" required></textarea>
                            <div class="invalid-feedback">Please provide a reason for the modification.</div>
                        </div>
                        <div class="section password-field1 d-none">
                            <strong>Shift password: <span class="text-danger">*</span></strong>
                            <span id="data-patient-password-view1"></span>
                            <input type="password" autocomplete="off" class="form-control" id="data-patient-password-edit1" required placeholder="Enter shift password to confirm changes" >
                        </div>
                
                        <!-- Vital Signs Table -->
                            <div class="section">
                                <h4>Vital Signs</h4>
                                <!--ranges-->
                                <div class="normal-ranges">
                                    <p><strong>Normal ranges:</strong></p>
                                    <ul>
                                        <li>Temperature: 97.8°F to 99.1°F (36.5°C to 37.3°C)</li>
                                        <li>Blood pressure: between 90/60 mmHg and 120/80 mmHg</li>
                                        <li>Pulse rate: 60 to 100 beats per minute</li>
                                        <li>Respiratory rate: 12 to 18 breaths per minute</li>
                                        <li>Oxygen saturation: 95% or higher</li>
                                    </ul>
                                </div>
                                <!-- Action Buttons -->
                                <div class="vitals-input-container mb-3">
                                    <div class="d-flex align-items-center gap-2">
                                      <!-- Temperature -->
                                      <div class="input-group vital-input-group">
                                        <span class="input-group-text">Temp</span>
                                        <input type="number" class="form-control" placeholder="°C" step="0.1">
                                      </div>
                                      <!-- Blood Pressure -->
                                      <div class="input-group vital-input-group">
                                        <span class="input-group-text">BP</span>
                                        <input type="text" class="form-control bp-input" placeholder="mmHg" 
                                               pattern="\d{1,3}\/\d{1,3}">
                                        </div>              
                                      <!-- Pulse -->
                                      <div class="input-group vital-input-group">
                                        <span class="input-group-text">Pulse</span>
                                        <input type="number" class="form-control" placeholder="bpm" min="30" max="200">
                                      </div>

                                      <!-- Respiratory -->
                                      <div class="input-group vital-input-group">
                                        <span class="input-group-text">Resp</span>
                                        <input type="number" class="form-control" placeholder="bpm" min="10" max="60">
                                      </div>
                                      <!-- Oxygen -->
                                      <div class="input-group vital-input-group">
                                        <span class="input-group-text">SpO₂</span>
                                        <input type="number" class="form-control" placeholder="%" min="70" max="100">
                                      </div>  
                                      <!-- Button -->
                                      <button id="add-vitals-btn" class="btn btn-primary py-2 px-3" style="height: 38px; white-space: nowrap;"> 
                                        Add </button>
                                    </div>
                                  </div>

                                <div class="table-responsive mt-3">
                                    <table id="vitals-table" class="table table-striped" 
                                        data-toggle="table"
                                        data-click-to-select="true"
                                        data-single-select="true">
                                        <thead>
                                            <tr>
                                                <th data-field="datetime" data-sortable="true">Date and time</th>
                                                <th data-field="temperature" data-sortable="true">Temperature</th>
                                                <th data-field="blood_pressure" data-sortable="true">Blood pressure</th>
                                                <th data-field="pulse" data-sortable="true">Pulse rate</th>
                                                <th data-field="respiratory" data-sortable="true">Respiratory rate</th>
                                                <th data-field="oxygen" data-sortable="true">Oxygen saturation</th>
                                                <th data-field="remarks" data-sortable="true">Remarks</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <!--vs contents-->
                                        </tbody>
                                    </table>
                                </div>
                                <!-- Edit vs2 Modal -->
                                <div class="modal fade" id="editVitalsModal" tabindex="-1" aria-labelledby="editVitalsModalLabel" aria-hidden="true">
                                    <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div class="modal-header bg-primary text-white">
                                                <h5 class="modal-title" id="editVitalsModalLabel">Edit Vital Signs</h5>
                                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                            </div>
                                            <div class="modal-body">
                                                <form id="editVitalsForm">
                                                    <div class="mb-3">
                                                        <label class="form-label">Temperature (°C)</label>
                                                        <input type="number" step="0.1" class="form-control" id="edit-vs-temperature">
                                                    </div>
                                                    <div class="mb-3">
                                                        <label class="form-label">Blood Pressure (mmHg)</label>
                                                        <input type="text" class="form-control" id="edit-vs-bp" pattern="\d{1,3}/\d{1,3}">
                                                    </div>
                                                    <div class="mb-3">
                                                        <label class="form-label">Pulse Rate (bpm)</label>
                                                        <input type="number" class="form-control" id="edit-vs-pulse">
                                                    </div>
                                                    <div class="mb-3">
                                                        <label class="form-label">Respiratory Rate (bpm)</label>
                                                        <input type="number" class="form-control" id="edit-vs-respiratory">
                                                    </div>
                                                    <div class="mb-3">
                                                        <label class="form-label">Oxygen Saturation (%)</label>
                                                        <input type="number" class="form-control" id="edit-vs-oxygen">
                                                    </div>
                                                    <div class="mb-3">
                                                        <label class="form-label">Remarks</label>
                                                        <input type="text" class="form-control" id="edit-vs-remarks">
                                                    </div>
                                                    
                                                    <div class="mb-3">
                                                        <label class="form-label">Reason for Modification <span class="text-danger">*</span></label>
                                                        <textarea class="form-control" id="edit-vs-reason" maxlength="100" required></textarea>
                                                        <div class="invalid-feedback">Please provide a reason (max 100 chars)</div>
                                                    </div>
                                                    
                                                    <div class="mb-3">
                                                        <label class="form-label">Shift Password <span class="text-danger">*</span></label>
                                                        <div class="input-group">
                                                            <input type="password" autocomplete="off" class="form-control" id="edit-vs-password" placeholder="Enter shift password to confirm changes" required>
                                                            <button type="button" class="btn btn-primary" id="edit-vs-submit">Update</button>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div> 
                                <!-- end of vs2 modal-->
                            </div>
                            </div>
                    </div>
                </div>

                <div class="tab-content position-relative"> <!--to seperate tab3 and 4-->
                <!-- tab3 -->
                <div class="tab-pane fade" id="med" role="tabpanel" aria-labelledby="med-tab">
                    <div>
                        <strong>Patient Name:</strong>
                        <span id="data-patient-name-view2">{{ patient_name }}</span>
                        <input type="text" id="data-patient-name-edit2" value="{{ patient_name }}" class="form-control d-none">
                    </div>
                    <h4 class="mb-4">Create Drug Orders</h4>
                    <!-- Drug Order Form -->
                    <div class="card mb-5">
                        <div class="card-body">
                            <div class="row g-3">
                                <div class="row">
                                <div class="col-md-4">
                                    <label class="form-label" for="drugName_medication">Enter Drug Name</label>
                                    <input type="text" class="form-control" id="drugName_medication" placeholder="Q">
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label" for="dose_medication">Dose</label>
                                    <input type="number" class="form-control" id="dose_medication" value="0">
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label" for="units_medication">Units</label>
                                    <select class="form-select" id="units_medication">
                                        <option selected>Select</option>
                                        <option>mg</option>
                                        <option>g</option>
                                        <option>ml</option>
                                        <option>tablet(s)</option>
                                        <option>capsule(s)</option>
                                    </select>
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label" for="frequency_medication">Frequency</label>
                                    <select class="form-select" id="frequency_medication">
                                        <option selected>Select</option>
                                        <option>Once daily</option>
                                        <option>Twice daily</option>
                                        <option>Three times daily</option>
                                        <option>Four times daily</option>
                                        <option>Every 6 hours</option>
                                        <option>Every 8 hours</option>
                                        <option>As needed</option>
                                    </select>
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label" for="route_medication">Route</label>
                                    <select class="form-select" id="route_medication">
                                        <option selected>Select</option>
                                        <option>Oral</option>
                                        <option>IV</option>
                                        <option>IM</option>
                                        <option>Subcutaneous</option>
                                        <option>Topical</option>
                                        <option>Inhalation</option>
                                    </select>
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label" for="duration_medication">Duration</label>
                                    <div class="input-group">
                                        <input type="number" class="form-control" id="duration_medication" value="">
                                        <span class="input-group-text">Days</span>
                                    </div>
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label" for="quantity_medication">Quantity</label>
                                    <input type="number" class="form-control" id="quantity_medication" placeholder="Number">
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label" for="startDate_medication">Start Date</label>
                                    <input type="date" class="form-control" id="startDate_medication">
                                </div>
                            </div>
                            
                            <div class="mt-3">
                                <label class="form-label" for="healthDiagnostics_medication">Health Diagnostics</label>
                                <textarea class="form-control" id="healthDiagnostics_medication" rows="2" placeholder="Enter diagnostics / health problem description"></textarea>
                            </div>
                            
                            <div class="mt-3">
                                <label class="form-label" for="patientInstructions_medication">Patient Instructions</label>
                                <textarea class="form-control" id="patientInstructions_medication" rows="2" placeholder="Enter additional drug consumption instructions for the patient"></textarea>
                            </div>
                            
                            <div class="mt-3">
                                <label class="form-label" for="physicianInstructions_medication">Physician Instructions</label>
                                <textarea class="form-control" id="physicianInstructions_medication" rows="2" placeholder="Enter additional drug dispensing instructions for the pharmacist"></textarea>
                            </div>
                        
                            <div class="mt-3 text-end">
                                <button class="btn btn-secondary me-2" id="clear_medication">Clear</button>
                                <button class="btn btn-primary" id="add_medication">Add</button>
                            </div>
                        </div>
                    </div>
                        
                        <!-- Active Drug Orders Table -->
                        <h5 class="mt-5 mb-3">ACTIVE DRUG ORDERS</h5>
                        <div class="table-responsive">
                            <table class="table table-striped table-bordered" id="active">
                                <thead class="table-light">
                                    <tr>
                                        <th>Drug Name</th>
                                        <th>Dose</th>
                                        <th>Units</th>
                                        <th>Frequency</th>
                                        <th>Quantity</th>
                                        <th>Route</th>
                                        <th>Duration</th>
                                        <th>Start Date</th>
                                    </tr>
                                </thead>
                                <tbody>
                                </tbody>
                            </table>
                        </div>

                        <!-- Inactive Drug Orders Table -->
                        <h5 class="mt-5 mb-3">INACTIVE DRUG ORDERS</h5>
                        <div class="table-responsive">
                            <table class="table table-striped table-bordered" id="inactive">
                                <thead class="table-light">
                                    <tr>
                                        <th>Drug Name</th>
                                        <th>Dose</th>
                                        <th>Units</th>
                                        <th>Frequency</th>
                                        <th>Quantity</th>
                                        <th>Route</th>
                                        <th>Duration</th>
                                        <th>Start Date</th>
                                        <th>End Date</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!--h5 class="mt-5 mb-3">Print all Medication Logs
                        <button id="print-medication-logs" class="btn btn-link p-0 border-0 text-info" data-bs-toggle="tooltip" title="Print all medication logs">
                            <i class="bi bi-printer-fill fs-6"></i>
                        </button>
                    </h5-->
                    <!--end of tab 3-->
                </div>
                <!-- shift password Confirmation Modal before going to pt page-->
                <div class="modal fade" id="patientPasswordModal" tabindex="-1" aria-labelledby="passwordModalLabel" aria-hidden="true" data-bs-backdrop="static">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="passwordModalLabel">Patient Record</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <div class="mb-3" id="remarks-container">
                                    <label for="remarks1" class="form-label">Remarks:</label>
                                    <input type="text" autocomplete="off" class="form-control" id="remark1" placeholder="N/A">
                                </div>
                                <div class="mb-3">
                                    <label for="accessPassword" class="form-label">Enter Shift Password:</label>
                                    <input type="password" autocomplete="off" class="form-control" id="accessPassword" placeholder="Password">
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-primary" id="confirmAccess">Confirm</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- tab4 -->
                <div class="tab-pane fade" id="note" role="tabpanel" aria-labelledby="note-tab">
                    <div>
                        <strong>Patient Name:</strong>
                        <span id="data-patient-name-view3">{{ patient_name }}</span>
                        <input type="text" id="data-patient-name-edit3" value="{{ patient_name }}" class="form-control d-none">
                    </div>
                    <div class="notes-container">
                        <h1 class="d-flex align-items-center gap-2">
                            Nurse's Notes
                            <!--button id="print-nurse-notes" class="btn btn-link p-0 border-0 text-info" data-bs-toggle="tooltip" title="Print nurse's notes">
                                <i class="bi bi-printer-fill fs-4"></i>
                            </button-->
                        </h1>
                        <div class="notes-controls">
                            <button id="add-note-btn" class="btn-add">+ Add New Note</button>
                        </div>
                        <div class="notes-list" id="notes-list"><!--notes--></div>
                    </div>
                    <!--end of tab 4-->
                </div>

                <!-- Medication Order Modal -->
                <div class="modal fade" id="medicationOrderModal" tabindex="-1" aria-labelledby="medicationOrderModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                            <div class="modal-header bg-primary text-white">
                                <h5 class="modal-title" id="medicationOrderModalLabel">Edit Medication Order</h5>
                                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <form id="medicationOrderForm">
                                    <!-- Editable Drug Details -->
                                    <div class="row mb-4">
                                        <div class="col-md-4">
                                            <div class="mb-3">
                                                <label class="form-label">Drug Name <span class="text-danger">*</span></label>
                                                <input type="text" class="form-control" id="med-drug-name" required>
                                            </div>
                                        </div>
                                        <div class="col-md-2">
                                            <div class="mb-3">
                                                <label class="form-label">Dose <span class="text-danger">*</span></label>
                                                <input type="text" class="form-control" id="med-dose" required>
                                            </div>
                                        </div>
                                        <div class="col-md-2">
                                            <div class="mb-3">
                                                <label class="form-label">Units <span class="text-danger">*</span></label>
                                                <select class="form-select" id="med-units" required>
                                                    <option value="mg">Milligrams (mg)</option>
                                                    <option value="g">Grams (g)</option>
                                                    <option value="ml">Milliliters (mL)</option>
                                                    <option value="tablet">Tablets</option>
                                                    <option value="capsule">Capsules</option>
                                                    <option value="drop">Drops</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-md-2">
                                            <div class="mb-3">
                                                <label class="form-label">Frequency <span class="text-danger">*</span></label>
                                                <select class="form-select" id="med-frequency" required>
                                                    <option value="daily">Once Daily</option>
                                                    <option value="bid">Twice Daily (BID)</option>
                                                    <option value="tid">Three Times Daily (TID)</option>
                                                    <option value="qid">Four Times Daily (QID)</option>
                                                    <option value="prn">As Needed (PRN)</option>
                                                    <option value="q6h">Every 6 Hours</option>
                                                    <option value="q8h">Every 8 Hours</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-md-2">
                                            <div class="mb-3">
                                                <label class="form-label">Route <span class="text-danger">*</span></label>
                                                <select class="form-select" id="med-route" required>
                                                    <option value="oral">Oral</option>
                                                    <option value="iv">Intravenous (IV)</option>
                                                    <option value="im">Intramuscular (IM)</option>
                                                    <option value="sc">Subcutaneous (SC)</option>
                                                    <option value="topical">Topical</option>
                                                    <option value="inhalation">Inhalation</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row mb-4">
                                        <div class="col-md-3">
                                            <label class="form-label" for="med-duration">Duration</label>
                                            <div class="input-group">
                                                <input type="number" class="form-control" id="med-duration" value="">
                                                <span class="input-group-text">Days</span>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="mb-3">
                                                <label class="form-label">Status <span class="text-danger">*</span></label>
                                                <select class="form-select" id="med-status" required>
                                                    <option value="active">Active</option>
                                                    <option value="discontinued">Discontinued</option>
                                                    <option value="completed">Completed</option>
                                                </select>
                                            </div>
                                        </div>

                                    </div>

                                    <!-- Additional Editable Information Fields -->
                                    <div class="mb-3">
                                        <label class="form-label">Health Diagnostic</label>
                                        <textarea class="form-control" id="med-diagnostic" rows="3" placeholder="Enter health diagnostic information"></textarea>
                                    </div>

                                    <div class="mb-3">
                                        <label class="form-label">Patient Instructions</label>
                                        <textarea class="form-control" id="med-pt-instructions" rows="3" placeholder="Enter patient instructions"></textarea>
                                    </div>

                                    <div class="mb-3">
                                        <label class="form-label">Physician Instructions</label>
                                        <textarea class="form-control" id="med-md-instructions" rows="3" placeholder="Enter physician instructions"></textarea>
                                    </div>

                                    <!--med tracking-->
                                    <div class="mb-3">
                                        <label class="form-label d-block d-flex align-items-center gap-2">
                                            Medication Logs
                                        </label>
                                        <button id="addMedicationBtn" class="btn btn-primary mb-3">Add Medication Timestamp</button>
                                        <button id="undoMedicationBtn" class="btn btn-primary mb-3">Undo</button>
                                        <div class="table-responsive">
                                            <table class="table table-striped table-bordered" id="medicationLogsTable">
                                                <thead class="table-light">
                                                    <tr>
                                                        <th>Date/Time</th>
                                                        <th>Administered by</th>
                                                        <th>Status</th>
                                                        <th>Remarks</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>

                                    <!-- Password Confirmation -->
                                    <div class="mb-3">
                                        <label class="form-label">Confirm Password <span class="text-danger">*</span></label>
                                        <div class="input-group">
                                            <input type="password" autocomplete="new-password" class="form-control" id="med-password" placeholder="Enter your shift password to confirm changes" required>
                                            <button type="button" class="btn btn-primary" id="med-confirm-btn">Confirm</button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Medication Order Modal -->
                
            </div> 
        </div> <!--end of tab contents-->

        <!-- Password Confirmation Modal for updating and deleting -->
        <div class="modal fade" id="patientDetailModal" tabindex="-1" aria-labelledby="patientDetailModalLabel" aria-hidden="true" data-bs-backdrop="static">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="patientDetailLabel">Patient Record</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <!--div class="mb-3">
                            <label for="remarks" class="form-label">Remarks:</label>
                            <input type="text" class="form-control" id="remark" placeholder="N/A">
                        </div-->
                        <div class="mb-3">
                            <label for="accessShiftPassword" class="form-label">Enter Shift Password:</label>
                            <input type="password" class="form-control" id="accessShiftPassword" placeholder="Password">
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" id="confirmData">Confirm</button>
                    </div>
                </div>
            </div>
        </div> <!--end of modal-->

        <!-- QR Hidden printable content -->
        <div id="printable-wristband" style="display: none;">
            <div style="display: flex; width: 100%; font-family: Arial, sans-serif; border: 1px solid #000; padding: 10px;">
                <div style="flex: 1; padding: 10px;">
                    <p style="margin: 5px 0;"><strong>ID:</strong> <span id="print-id"></span></p>
                    <p style="margin: 5px 0;"><strong>Name:</strong> <span id="print-name"></span></p>
                    <p style="margin: 5px 0;"><strong>Birthday:</strong> <span id="print-bday"></span></p>
                    <p style="margin: 5px 0;"><strong>Ward:</strong> <span id="print-ward"></span></p>
                </div>
                <div style="flex: 1; display: flex; justify-content: center; align-items: center; padding: 10px;">
                    <img id="print-qr" src="" style="max-width: 150px; height: auto;">
                </div>
            </div>
        </div>
        <!-- QR End of Hidden printable content -->

        <!-- Hidden Summary printable content// patient summary/patient information-->
        <div id="printable-patient-chart" style="display: none;">
            <div style="font-family: Arial, sans-serif; padding: 20px; max-width: 800px; margin: 0 auto;">
                <!-- Header -->
                <div style="text-align: center; margin-bottom: 20px; border-bottom: 2px solid #333; padding-bottom: 10px;">
                    <h1 style="margin: 0; color: #0066cc;">PATIENT MEDICAL CHART</h1>
                    <p style="margin: 5px 0; font-size: 14px; color: #666;">Generated on: <span id="print-date"></span></p>
                </div>
                
                <!-- Patient Demographics -->
                <div style="margin-bottom: 30px; border: 1px solid #ddd; padding: 15px; background: #f9f9f9;">
                    <h2 style="margin-top: 0; color: #0066cc; border-bottom: 1px solid #ddd; padding-bottom: 5px;">Patient Information</h2>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <div><strong>Full Name:</strong> <span id="print-name1"></span></div>
                        <div><strong>Sex:</strong> <span id="print-sex"></span></div>
                        <div><strong>Date of Birth:</strong> <span id="print-bday1"></span></div>
                        <div><strong>Phone Number:</strong> <span id="print-phone"></span></div>
                        <div><strong>Attending Physician:</strong> <span id="print-physician"></span></div>
                        <div><strong>Patient ID:</strong> <span id="print-id1"></span></div>
                    </div>
                </div>
                
                <!-- Medical Information -->
                <div style="margin-bottom: 30px;">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <!-- Left Column -->
                        <div>
                            <div style="border: 1px solid #ddd; padding: 15px; margin-bottom: 20px; background: #f9f9f9;">
                                <h3 style="margin-top: 0; color: #0066cc;">Allergies</h3>
                                <div id="print-allergies" style="min-height: 50px;"></div>
                            </div>
                            
                            <div style="border: 1px solid #ddd; padding: 15px; background: #f9f9f9;">
                                <h3 style="margin-top: 0; color: #0066cc;">Family History</h3>
                                <div id="print-family-history" style="min-height: 50px;"></div>
                            </div>
                        </div>
                        
                        <!-- Right Column -->
                        <div>
                            <div style="border: 1px solid #ddd; padding: 15px; margin-bottom: 20px; background: #f9f9f9;">
                                <h3 style="margin-top: 0; color: #0066cc;">Physical Exam</h3>
                                <div id="print-physical-exam" style="min-height: 50px;"></div>
                            </div>
                            
                            <div style="border: 1px solid #ddd; padding: 15px; background: #f9f9f9;">
                                <h3 style="margin-top: 0; color: #0066cc;">Diagnosis</h3>
                                <div id="print-diagnosis" style="min-height: 50px;"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                
                
                <!-- Vital Signs -->
                <div style="margin-bottom: 30px;">
                    <h2 style="color: #0066cc; border-bottom: 1px solid #ddd; padding-bottom: 5px;">Vital Signs</h2>
                    <table id="print-vitals-table" style="width: 100%; border-collapse: collapse;">
                        <thead>
                            <tr style="background-color: #0066cc; color: white;">
                                <th style="padding: 8px; text-align: left; border: 1px solid #ddd;">Date/Time</th>
                                <th style="padding: 8px; text-align: left; border: 1px solid #ddd;">Temp (°C)</th>
                                <th style="padding: 8px; text-align: left; border: 1px solid #ddd;">BP</th>
                                <th style="padding: 8px; text-align: left; border: 1px solid #ddd;">Pulse</th>
                                <th style="padding: 8px; text-align: left; border: 1px solid #ddd;">Respiratory</th>
                                <th style="padding: 8px; text-align: left; border: 1px solid #ddd;">Oxygen (%)</th>
                                <th style="padding: 8px; text-align: left; border: 1px solid #ddd;">Remarks</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>

                <!-- Medications -->
                <div style="margin-bottom: 30px;">
                    <h2 style="color: #0066cc; border-bottom: 1px solid #ddd; padding-bottom: 5px;">Medications</h2>
                    <table id="print-meds-table" style="width: 100%; border-collapse: collapse;">
                        <thead>
                            <tr style="background-color: #0066cc; color: white;">
                                <th style="padding: 8px; text-align: left; border: 1px solid #ddd;">Drug Name</th>
                                <th style="padding: 8px; text-align: left; border: 1px solid #ddd;">Dose</th>
                                <th style="padding: 8px; text-align: left; border: 1px solid #ddd;">Units</th>
                                <th style="padding: 8px; text-align: left; border: 1px solid #ddd;">Frequency</th>
                                <th style="padding: 8px; text-align: left; border: 1px solid #ddd;">Route</th>
                                <th style="padding: 8px; text-align: left; border: 1px solid #ddd;">Quantity</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
                

                <!--med logs-->
                <div style="margin-bottom: 30px;">
                    <h2 style="color: #0066cc; border-bottom: 1px solid #ddd; padding-bottom: 5px;">Medication logs</h2>
                    <table id="print-meds-logs-table" style="width: 100%; border-collapse: collapse; margin-top: 20px;">
                        <thead>
                            <tr style="background-color: #0066cc; color: white;">
                                <th style="padding: 8px; text-align: left; border: 1px solid #ddd;">Drug Name</th>
                                <th style="padding: 8px; text-align: left; border: 1px solid #ddd;">Date/Time Administered</th>
                                <th style="padding: 8px; text-align: left; border: 1px solid #ddd;">Administered By</th>
                                <th style="padding: 8px; text-align: left; border: 1px solid #ddd;">Status</th>
                                <th style="padding: 8px; text-align: left; border: 1px solid #ddd;">Remarks</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>

                <!--nurse notes-->
                <h2 style="color: #0066cc; border-bottom: 1px solid #ddd; padding-bottom: 5px;">Nurse's notes</h2>
                <div style="margin-bottom: 30px;" id="print-notes-container">
                    <!-- Notes will be inserted here -->
                </div>


                <!-- Footer -->
                <div style="text-align: center; margin-top: 30px; border-top: 2px solid #333; padding-top: 10px;">
                    <p style="font-size: 12px; color: #666;">Electronic Health Record System - Confidential Patient Information</p>
                </div>
            </div>
        </div>
        <!-- End Summary Hidden printable content/ patient summary-->

        <!-- Hidden Summary printable content// med logs->
        <div id="printable-medication-logs" style="display: none;">
            <div style="font-family: Arial, sans-serif; padding: 20px; max-width: 800px; margin: 0 auto;">
                <!- Header >
                <div style="text-align: center; margin-bottom: 20px; border-bottom: 2px solid #333; padding-bottom: 10px;">
                    <h1 style="margin: 0; color: #0066cc;">MEDICATION ADMINISTRATION RECORD</h1>
                    <p style="margin: 5px 0; font-size: 14px; color: #666;">Generated on: <span id="meds-print-date"></span></p>
                </div>
                
                <!- Patient Summary >
                <div style="margin-bottom: 30px; border: 1px solid #ddd; padding: 15px; background: #f9f9f9;">
                    <h2 style="margin-top: 0; color: #0066cc; border-bottom: 1px solid #ddd; padding-bottom: 5px;">Patient Summary</h2>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <div><strong>Patient Name:</strong> <span id="meds-print-name"></span></div>
                        <div><strong>Patient ID:</strong> <span id="meds-print-id"></span></div>
                        <div><strong>Date of Birth:</strong> <span id="meds-print-bday"></span></div>
                        <div><strong>Attending Physician:</strong> <span id="meds-print-physician"></span></div>
                    </div>
                </div>
                
                <!- Medication Logs Table >
                <div style="margin-bottom: 30px;">
                    <table id="print-meds-logs-table" style="width: 100%; border-collapse: collapse; margin-top: 20px;">
                        <thead>
                            <tr style="background-color: #0066cc; color: white;">
                                <th style="padding: 8px; text-align: left; border: 1px solid #ddd;">Drug Name</th>
                                <th style="padding: 8px; text-align: left; border: 1px solid #ddd;">Date/Time Administered</th>
                                <th style="padding: 8px; text-align: left; border: 1px solid #ddd;">Administered By</th>
                                <th style="padding: 8px; text-align: left; border: 1px solid #ddd;">Status</th>
                                <th style="padding: 8px; text-align: left; border: 1px solid #ddd;">Remarks</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!- Will be populated by JavaScript >
                        </tbody>
                    </table>
                </div>
                
                <!- Footer >
                <div style="text-align: center; margin-top: 30px; border-top: 2px solid #333; padding-top: 10px;">
                    <p style="font-size: 12px; color: #666;">Electronic Health Record System - Confidential Patient Information</p>
                </div>
            </div>
        </div-->
        <!-- end of Hidden Summary printable content// med logs-->

        <!-- Hidden Summary printable content// nurses notes>
        <div id="printable-nurse-notes" style="display: none;">
            <div style="font-family: Arial, sans-serif; padding: 20px; max-width: 800px; margin: 0 auto;">
                <!- Header >
                <div style="text-align: center; margin-bottom: 20px; border-bottom: 2px solid #333; padding-bottom: 10px;">
                    <h1 style="margin: 0; color: #0066cc;">NURSE'S NOTES</h1>
                    <p style="margin: 5px 0; font-size: 14px; color: #666;">Generated on: <span id="notes-print-date"></span></p>
                </div>
                
                <!- Patient Info Summary ->
                <div style="margin-bottom: 30px; border: 1px solid #ddd; padding: 15px; background: #f9f9f9;">
                    <h2 style="margin-top: 0; color: #0066cc; border-bottom: 1px solid #ddd; padding-bottom: 5px;">Patient Summary</h2>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <div><strong>Patient Name:</strong> <span id="notes-print-name"></span></div>
                        <div><strong>Patient ID:</strong> <span id="notes-print-id"></span></div>
                        <div><strong>Date of Birth:</strong> <span id="notes-print-bday"></span></div>
                        <div><strong>Attending Physician:</strong> <span id="notes-print-physician"></span></div>
                    </div>
                </div>
                
                <!- Nurse's Notes Section ->
                <div style="margin-bottom: 30px;" id="print-notes-container">
                    <!- Notes will be inserted here >
                </div>

            </div>
        </div-->
        <!-- end of Hidden Summary printable content// nurses notes-->


        </div> <!--ano to, naliligaw? (hahaha)-->
        
    </div> <!--all page-->

    <!--bootstrap-->
    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!--table-->
    <script src="https://unpkg.com/bootstrap-table@1.21.3/dist/bootstrap-table.min.js"></script>
    <script src="https://cdn.datatables.net/2.2.2/js/dataTables.js"></script>
    <script src="https://cdn.datatables.net/2.2.2/js/dataTables.bootstrap5.js"></script>
    <!--phone num-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/intlTelInput.min.js"></script>

    
    <script>
        const csrfToken = "{{ csrf_token }}"; // Django template tag to get the CSRF token
    </script>
    <script src="{% static 'js/patient.js' %}"></script>

</body>
</html>